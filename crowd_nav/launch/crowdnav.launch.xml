<launch>

  <arg name="lang" default="PYTHON" description="Choose whether python or C++ BRNE nodes are launched. options: PYTHON, C++"/>
  <arg name="sim_odom" default="true" description="Simulate cmd_vel->odom update"/>
  <arg name="sim_ped" default="true" description="Simulate a pedestrian"/>
  <arg name="debug_level" default="info" description="Choose the debug level for the BRNE node"/>

  <!-- Python algorithm node -->
  <node pkg="brne_py" exec="brne_nav" if="$(eval '\'$(var lang)\' == \'PYTHON\'')" args="--ros-args --log-level brne_nav:=$(var debug_level)">
  </node>

  <!-- C++ algorithm nodes -->
  <node pkg="crowd_nav" exec="path_plan" if="$(eval '\'$(var lang)\' == \'C++\'')">
  </node>
  <node pkg="crowd_nav" exec="controller" if="$(eval '\'$(var lang)\' == \'C++\'')">
  </node>

  <!-- simulate cmd_vel to odom updates -->
  <node pkg="crowd_nav" exec="sim_robot" if="$(eval '\'$(var sim_odom)\' == \'true\'')">
  </node>

  <!-- simulate a pedestrian at 1,0 -->
  <node pkg="pedestrian_tracking" exec="simulate_pedestrians" if="$(eval '\'$(var sim_ped)\' == \'true\'')">
  </node>

  <!-- Convert zed messages to the right type if not simulating pedestrians -->
  <node pkg="pedestrian_tracking" exec="convert_zed_ped" if="$(eval '\'$(var sim_ped)\' == \'false\'')">
  </node>

   <!-- publish pedestrian markers -->
  <node pkg="pedestrian_tracking" exec="show_pedestrians">
  </node>

   <!-- Service to publish goal pose -->
  <node pkg="crowd_nav" exec="pub_goal">
  </node>

  <!-- launch visualizations -->
  <node pkg="rviz2" exec="rviz2" args="-d $(find-pkg-share crowd_nav)/config/crowdnav.rviz"/>

</launch>
